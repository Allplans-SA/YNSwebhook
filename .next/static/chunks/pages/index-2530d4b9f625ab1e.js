(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{18967:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=18967,e.exports=t},29985:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=29985,e.exports=t},75557:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(31296)}])},64770:function(e,t,o){"use strict";let n=o(25293);class i extends n{}let s=new i;e.exports=s},12285:function(e){"use strict";let t={};e.exports={getConversationState:function(e){return t[e]||{stage:"start"}},setConversationState:function(e,o){t[e]=o}}},31296:function(e,t,o){let n=o(99268),i=o(10046);o(1864);let{handleWebhook:s}=o(2299),{generateQRCode:a}=o(13516),u=n();u.use(i.json()),u.get("/",async(e,t)=>{try{let e=await a();t.send('\n            <html>\n                <head>\n                    <title>WhatsApp QR Code</title>\n                </head>\n                <body>\n                    <img src="'.concat(e,'" alt="WhatsApp QR Code">\n                </body>\n            </html>\n        '))}catch(e){console.error("Error generating QR code:",e),t.status(500).send("Internal server error")}}),u.post("/webhook",s),u.listen(3e3,()=>{console.log("Server is listening at http://localhost:".concat(3e3))})},2299:function(e,t,o){"use strict";let{sendMessage:n}=o(13516),i=o(64770);async function s(e){return 35>=Math.ceil((new Date(e).getTime()-Date.now())/864e5)}let a=[{name:"Amsterdam",budget:1800},{name:"Rotterdam",budget:1e3},{name:"Utrecht",budget:1e3},{name:"Den Haag",budget:1e3},{name:"Haarlem",budget:1800}];async function u(e,t){var o,u,l,r,c,d,f,h,g,y;let m=e.body,p=m.data.fields;console.log(m);let w=null===(o=p.find(e=>"First Name"===e.label))||void 0===o?void 0:o.value;i.emit("firstName",w);let v=null===(u=p.find(e=>"Phone"===e.label))||void 0===u?void 0:u.value;i.emit("number",v);let b=null===(l=p.find(e=>"Move-in date"===e.label))||void 0===l?void 0:l.value;i.emit("date",b);let D=null===(c=p.find(e=>"Please describe the composition of the household."===e.label))||void 0===c?void 0:null===(r=c.options.find(e=>e.id===p.find(e=>"Please describe the composition of the household."===e.label).value[0]))||void 0===r?void 0:r.text,C=null===(f=p.find(e=>"Interior"===e.label))||void 0===f?void 0:null===(d=f.options.find(e=>e.id===p.find(e=>"Interior"===e.label).value[0]))||void 0===d?void 0:d.text,k=null===(h=p.find(e=>"Budget"===e.label))||void 0===h?void 0:h.value;i.emit("budget",k);let T=null===(g=p.find(e=>"City"===e.label))||void 0===g?void 0:g.options.find(e=>e.id===p.find(e=>"City"===e.label).value[0]),q=null==T?void 0:T.text,_=null===(y=a.find(e=>e.name===q))||void 0===y?void 0:y.budget;if(console.log("First Name: ".concat(w)),console.log("Phone Number: ".concat(v)),console.log("Budget: ".concat(k)),console.log("City: ".concat(q)),console.log("Move-in Date: ".concat(b)),console.log("Household Composition: ".concat(D)),console.log("Interior: ".concat(C)),console.log("Chosen City: ".concat(q)),console.log("City Budget: ".concat(_)),parseInt(k)>=parseInt(_)){if(await s(b))await n(v,"Hi ".concat(w,", we're excited to help you find your new home quickly. To get started, type 'start'."));else{let e="Hi ".concat(w,", we can’t wait to help you find your new home on ").concat(b,". Don’t worry, we will notify you by then. In the meantime, feel free to reach out if you have any questions.");await n(v,e)}}else await n(v,"Hi ".concat(w,", we have received your registration on our website. Unfortunately, we cannot proceed with the budget you have provided. Considering the current housing market conditions and our no cure, no pay policy, we have had to establish a minimum budget requirement. Thank you for your understanding. If you would like to inquire about the minimum budgets, please respond with 'budget'."));return t.status(200).send("Webhook received successfully"),w}e.exports={handleWebhook:u}},13516:function(e,t,o){"use strict";let{Client:n,NoAuth:i}=o(60399),s=o(92592),{getConversationState:a,setConversationState:u}=o(12285),l=o(64770),r=new n({authStrategy:new i});async function c(){return new Promise((e,t)=>{r.on("qr",o=>{s.toDataURL(o,(o,n)=>{o?t(o):e(n)})})})}async function d(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let o=(e=e.replace("+",""))+"@c.us";await r.sendMessage(o,t),console.log("Message sent to ".concat(o))}catch(t){console.error("Failed to send message to ".concat(e),t)}}r.initialize(),r.on("ready",()=>{console.log("WhatsApp Client is ready!")});let f="";l.on("firstName",e=>{f=e}),l.on("budget",e=>{newBudget=e}),r.on("message",async e=>{if("start"===e.body.toLowerCase()){let t=e.from,o=f;u(t,{stage:"question1"}),setTimeout(()=>{r.sendMessage(t,"".concat(o," To help you find your perfect home, we'd love to know more about what you like. This will help us tailor the search just for you:"))},3e3)}else{let t=e.from;switch(a(t).stage){case"question1":u(t,{stage:"question2"}),setTimeout(()=>{r.sendMessage(t,"\uD83D\uDCCDLocation: What's your ideal area or neighborhood?")},3e3);break;case"question2":u(t,{stage:"question3"}),setTimeout(()=>{r.sendMessage(t,"\uD83C\uDFE0 What is your style: What style of home are you drawn to? (modern, traditional, loft)")},3e3);break;case"question3":u(t,{stage:"question4"}),setTimeout(()=>{r.sendMessage(t,"\uD83E\uDD29 Extras: What do your prefer (e.g., balcony, pet-friendly)")},3e3);break;case"question4":u(t,{stage:"question5"}),setTimeout(()=>{r.sendMessage(t,"\uD83C\uDF89 Congratulations! We're thrilled to help you find the perfect home. We'll be in touch with some listings soon.")},3e3),setTimeout(()=>{r.sendMessage(t,"\uD83D\uDCC8 Speed up the process! Upload your documents now for priority assistance and get listings faster. https://upload.ynsagency.nl\n  \n  PS. Can't click the link? Just add us to contacts to activate it!\n\n  ✅ Type 'done' after uploading.\n  \n  \uD83D\uDE15 Prefer not to? Type 'listings'.")},1e4);break;case"question5":let o=newBudget;u(t,{stage:"question6"}),setTimeout(()=>{r.sendMessage(t,"Shall we stick to listings within your budget of ".concat(o," only? \uD83D\uDE0A \n\nOr open to exceeding it for the right match? Please reply with your max budget."))},5e3)}}}),e.exports={sendMessage:d,generateQRCode:c}},42810:function(){},12974:function(){},36404:function(){},69536:function(){},19527:function(){},69331:function(){},36368:function(){},37974:function(){},13432:function(){},24654:function(){},71156:function(){},52361:function(){},94616:function(){},95872:function(){},67632:function(){}},function(e){e.O(0,[714,967,831,514,268,888,774,179],function(){return e(e.s=75557)}),_N_E=e.O()}]);